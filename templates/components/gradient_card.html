{% macro road_card(road) %}
<div class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all transform hover:-translate-y-1 duration-200">
    <div class="relative">
        <!-- Gradient Header with color based on steepness -->
        <div class="h-3 w-full {% if road.gradient > 12 %}bg-red-600{% elif road.gradient > 8 %}bg-red-500{% elif road.gradient > 6 %}bg-yellow-500{% elif road.gradient > 4 %}bg-green-500{% else %}bg-blue-500{% endif %}"></div>
        
        <!-- Card Content -->
        <div class="p-5">
            <div class="flex justify-between items-start mb-3">
                <div>
                    <h3 class="text-lg font-bold text-gray-900 flex items-center">
                        {{ road.name if road.name else 'Unnamed Road' }}
                        {% if road.favorite %}
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-500 ml-1" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                        </svg>
                        {% endif %}
                    </h3>
                    <p class="text-sm text-gray-600 flex items-center mt-1">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" />
                        </svg>
                        {{ road.highway.title() if road.highway else 'Road' }}
                    </p>
                </div>
                <div class="flex flex-col items-end">
                    <span class="inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium {% if road.gradient > 12 %}bg-red-100 text-red-800{% elif road.gradient > 8 %}bg-red-100 text-red-800{% elif road.gradient > 6 %}bg-yellow-100 text-yellow-800{% elif road.gradient > 4 %}bg-green-100 text-green-800{% else %}bg-blue-100 text-blue-800{% endif %}">
                        {{ "%.1f"|format(road.gradient) }}% Gradient
                    </span>
                    <span class="text-xs text-gray-500 mt-1">{{ road.difficulty if road.difficulty else 'Moderate' }} difficulty</span>
                </div>
            </div>
            
            <!-- Elevation Profile Preview -->
            <div class="h-16 bg-gray-50 rounded-lg overflow-hidden mb-4">
                <div class="relative h-full w-full">
                    <!-- Simple SVG elevation profile -->
                    <svg viewBox="0 0 100 30" preserveAspectRatio="none" class="h-full w-full">
                        <path d="M0,30 L0,15 C10,25 20,10 30,15 C40,20 50,5 60,10 C70,15 80,20 90,10 L100,15 L100,30 Z" 
                              class="{% if road.gradient > 8 %}fill-red-100 stroke-red-500{% elif road.gradient > 5 %}fill-yellow-100 stroke-yellow-500{% else %}fill-blue-100 stroke-blue-500{% endif %}" 
                              stroke-width="1"/>
                    </svg>
                    
                    <!-- Start and End markers -->
                    <div class="absolute bottom-1 left-1 text-xs text-gray-600">{{ road.min_elevation|int }}m</div>
                    <div class="absolute bottom-1 right-1 text-xs text-gray-600">{{ road.max_elevation|int }}m</div>
                </div>
            </div>
            
            <!-- Stats Grid -->
            <div class="grid grid-cols-2 gap-4 mb-4 text-sm">
                <div class="bg-gray-50 p-2 rounded-lg">
                    <p class="text-gray-600">Length</p>
                    <p class="font-medium text-gray-900">{{ "%.1f"|format(road.length_meters/1000) }} km</p>
                </div>
                <div class="bg-gray-50 p-2 rounded-lg">
                    <p class="text-gray-600">Elevation Gain</p>
                    <p class="font-medium text-gray-900">{{ ((road.max_elevation - road.min_elevation)|int) }} m</p>
                </div>
                <div class="bg-gray-50 p-2 rounded-lg">
                    <p class="text-gray-600">Max Speed</p>
                    <p class="font-medium text-gray-900">{{ road.maxspeed if road.maxspeed else 'N/A' }} km/h</p>
                </div>
                <div class="bg-gray-50 p-2 rounded-lg">
                    <p class="text-gray-600">Surface</p>
                    <p class="font-medium text-gray-900">{{ road.surface.title() if road.surface else 'Asphalt' }}</p>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-between space-x-2">
                <button 
                    hx-get="/api/roads/{{ road.id }}/profile"
                    hx-target="#profile-view"
                    class="flex-1 bg-blue-50 hover:bg-blue-100 text-blue-700 px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z" />
                    </svg>
                    View Profile
                </button>
                <button 
                    onclick="showOnMap({{ road.id }})"
                    class="flex-1 bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M12 1.586l-4 4v12.828l4-4V1.586zM3.707 3.293A1 1 0 002 4v10a1 1 0 00.293.707L6 18.414V5.586L3.707 3.293zM17.707 5.293L14 1.586v12.828l2.293 2.293A1 1 0 0018 16V6a1 1 0 00-.293-.707z" clip-rule="evenodd" />
                    </svg>
                    Show on Map
                </button>
            </div>
        </div>
    </div>
</div>
{% endmacro %}